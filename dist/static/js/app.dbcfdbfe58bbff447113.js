webpackJsonp([1],{"+1AM":function(t,e){},"/1cx":function(t,e){},"0YFJ":function(t,e){},"2QhH":function(t,e,a){t.exports=a.p+"static/img/welcome.cfe6829.jpg"},"2RT5":function(t,e,a){t.exports=a.p+"static/img/swiper_02.0f74bfe.jpg"},"7Uc2":function(t,e){},KYUQ:function(t,e){},KZZs:function(t,e,a){t.exports=a.p+"static/img/swiper_01.1b2a898.jpg"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("rVsN"),n=a.n(o),s=a("5C5s"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=a("Z0/y")({name:"App"},i,!1,function(t){a("/1cx")},null,null).exports,r=a("zO6J"),d={data:function(){return{zhanghao:"",password:""}},mounted:function(){this.$Notice.open({title:"欢迎",desc:"欢迎来到华云学生成绩管理系统，你可以在这里查看、修改学生信息。"})},methods:{handleSpinCustom:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"load-c",size:18}}),t("div","Loading")])}})},login:function(){var t=this,e=this.zhanghao,a=this.password;e&&a?(this.handleSpinCustom(),this.$http({method:"post",url:"/api/login",data:{user_name:e,pass_word:a}}).then(function(e){if(t.$Spin.hide(),0===e.data.status){var a=e.data.data;localStorage.user_name=a.name,localStorage.user_power=a.power,localStorage.token=a.token,t.$Message.success("登录成功"),t.$http.defaults.headers.common.Authorization=localStorage.token||"",t.$router.push({name:"welcome"})}})):this.$Message.warning("账号和密码不能为空")}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("Row",{attrs:{"class-name":"login-row",type:"flex",align:"middle",gutter:20}},[o("Col",{attrs:{span:"16",offset:"2"}},[o("div",{staticClass:"welcome"},[o("img",{attrs:{src:a("2QhH")}})])]),t._v(" "),o("Col",{attrs:{span:"4"}},[o("div",{staticClass:"box"},[o("p",[t._v("华云学生成绩管理系统")]),t._v(" "),o("Input",{attrs:{icon:"person",placeholder:"请输入账号"},on:{"on-enter":t.login},model:{value:t.zhanghao,callback:function(e){t.zhanghao=e},expression:"zhanghao"}}),t._v(" "),o("Input",{staticStyle:{"margin-top":"20px"},attrs:{type:"password",icon:"key",placeholder:"请输入密码"},on:{"on-enter":t.login},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),o("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",long:""},on:{click:t.login}},[t._v("登录")])],1)])],1)],1)},staticRenderFns:[]};var u=a("Z0/y")(d,c,!1,function(t){a("0YFJ")},null,null).exports,h={data:function(){return{power:2,menuUrl:["","student","teacher"]}},mounted:function(){this.power=localStorage.user_power},methods:{handleDropdown:function(t){"logout"===t?(localStorage.removeItem("token"),this.$router.replace({name:"login"})):"other"===t&&this.$router.push({name:"other-manage"})},gotoOther:function(t){var e=this.menuUrl;this.$router.push({name:e[t]})},gotoIndexPage:function(){this.$router.push({name:"welcome"})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"3"},on:{"on-select":t.gotoOther}},[a("div",{staticClass:"title",on:{click:t.gotoIndexPage}},[t._v("华云学生成绩管理系统")]),t._v(" "),a("div",{staticClass:"layout-nav"},[a("MenuItem",{attrs:{name:"1","data-url":"checkStudent"}},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v("\r                            学生管理\r                        ")],1),t._v(" "),1==t.power?a("MenuItem",{attrs:{name:"2","data-url":"teacher"}},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v("\r                            教师管理\r                        ")],1):t._e(),t._v(" "),a("MenuItem",{attrs:{name:"3"}},[a("Dropdown",{on:{"on-click":t.handleDropdown}},[a("a",{staticClass:"menu",attrs:{href:"javascript:void(0)"}},[t._v("\r                                    更多\r                                    "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"other"}},[t._v("其他管理")]),t._v(" "),a("DropdownItem",{attrs:{name:"logout"}},[t._v("退出")])],1)],1)],1)],1)])],1),t._v(" "),a("Content",{style:{padding:"20px 50px 0"}},[a("Card",[a("div",{staticStyle:{"min-height":"500px"}},[a("router-view")],1)])],1),t._v(" "),a("Footer",{staticClass:"layout-footer-center"},[t._v("2017-2018 © 华云学生成绩管理系统")])],1)],1)},staticRenderFns:[]};var m=a("Z0/y")(h,p,!1,function(t){a("7Uc2")},null,null).exports,f={data:function(){return{index:0,name:"",power:2,powerArr:["超级管理员","普通管理员"]}},mounted:function(){var t=this;this.$http({method:"get",url:"/api/check_login"}).then(function(e){0!==e.data.status&&t.$router.replace({name:"login"})}),this.name=localStorage.user_name,this.power=localStorage.user_power}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"welcome"},[o("h3",{staticStyle:{"margin-bottom":"16px"}},[t._v("欢迎，"+t._s(t.name)+"。您是"+t._s(t.powerArr[t.power-1])+"。")]),t._v(" "),o("Carousel",{attrs:{autoplay:"","autoplay-speed":3e3,loop:""},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},[o("CarouselItem",[o("div",{staticClass:"demo-carousel"},[o("img",{attrs:{src:a("KZZs")}})])]),t._v(" "),o("CarouselItem",[o("div",{staticClass:"demo-carousel"},[o("img",{attrs:{src:a("2RT5")}})])]),t._v(" "),o("CarouselItem",[o("div",{staticClass:"demo-carousel"},[o("img",{attrs:{src:a("SaGo")}})])])],1)],1)},staticRenderFns:[]};var v=a("Z0/y")(f,g,!1,function(t){a("etUc")},null,null).exports,_=a("3cXf"),y=a.n(_),w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{value:t.show,width:"600"},on:{"on-visible-change":t.change}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"学生姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"姓名"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"学生学号",prop:"id"}},[a("Input",{attrs:{disabled:0!=t.mode,placeholder:"学号"},model:{value:t.formValidate.id,callback:function(e){t.$set(t.formValidate,"id",e)},expression:"formValidate.id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"性别",prop:"sex"}},[a("Select",{model:{value:t.formValidate.sex,callback:function(e){t.$set(t.formValidate,"sex",e)},expression:"formValidate.sex"}},[a("Option",{attrs:{value:"0"}},[t._v("男")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("女")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("未知")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"班级信息"}},[a("Cascader",{attrs:{data:t.collageData},model:{value:t.collageArr,callback:function(e){t.collageArr=e},expression:"collageArr"}})],1),t._v(" "),a("FormItem",{attrs:{label:"成绩"}},[t.addGrade?a("div",{staticStyle:{display:"flex"}},[a("Input",{staticStyle:{width:"150px","margin-right":"5px"},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("科目")])]),t._v(" "),a("Input",{staticStyle:{width:"100px","margin-right":"5px"},model:{value:t.grade,callback:function(e){t.grade=e},expression:"grade"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("分数")])]),t._v(" "),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(e){t.addGrade=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{size:"small",type:"info"},on:{click:t.addTag}},[t._v("确定")])],1):a("div",[t._l(t.formValidate.tagList,function(e,o){return a("Tag",{key:e,attrs:{name:e,closable:"",color:t.color[o%4]},on:{"on-close":function(e){t.delTag(o)}}},[t._v(t._s(e))])}),t._v(" "),a("Button",{attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:function(e){t.addGrade=!0}}},[t._v("添加成绩")])],2)]),t._v(" "),a("FormItem",[0===t.mode?a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("确定")]):a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateStudent("formValidate")}}},[t._v("修改")]),t._v(" "),0===t.mode?a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("重置")]):t._e()],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var x={components:{addStudent:a("Z0/y")({props:["show","mode","formValidate"],computed:{},data:function(){return{subject:"",grade:"",addGrade:!1,color:["blue","green","red","yellow"],collageData:[],collageArr:[],ruleValidate:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],id:[{required:!0,message:"学号不能为空",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空",trigger:"blur"}],collageArr:[{required:!0,message:"班级信息不能为空",trigger:"blur"}],major:[{required:!0,message:"专业不能为空",trigger:"blur"}]}}},watch:{collageArr:function(t){t[0]?this.formValidate.collage=t[0]:this.formValidate.collage="",t[2]?this.formValidate.major=t[2]:this.formValidate.major=""}},mounted:function(){this.getCollageList()},methods:{initData:function(t){var e=this;this.collageData=[],t.forEach(function(t){var a={value:t.name,label:t.name,children:[]};t.speciality.forEach(function(t,e){a.children.push({value:t.name,label:t.name,children:[]}),t.class&&t.class.forEach(function(t){a.children[e].children.push({value:t,label:t})})}),e.collageData.push(a)})},getCollageList:function(){var t=this;this.$http({method:"get",url:"/api/other"}).then(function(e){t.initData(e.data.data.list)})},handleSpinCustom:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"load-c",size:18}}),t("div","Loading")])}})},change:function(t){!1===t&&this.$emit("closeForm")},handleSubmit:function(t){var e=this;""!==this.formValidate.collage&&""!==this.formValidate.major?this.$refs[t].validate(function(t){t?(e.handleSpinCustom(),e.$emit("closeForm"),e.$http({method:"post",url:"/api/add_student",data:{std_form:e.formValidate}}).then(function(t){0===t.data.status&&(e.$emit("add_success"),e.$Message.success("添加成功"))})):e.$Message.error("Fail!")}):this.$Message.error("班级信息不完整")},updateStudent:function(t){var e=this;""!==this.formValidate.collage&&""!==this.formValidate.major?this.$refs[t].validate(function(t){t?(e.handleSpinCustom(),e.$emit("closeForm"),e.$http({method:"post",url:"/api/modifly_student",data:{std_form:e.formValidate}}).then(function(t){0===t.data.status&&(e.$emit("add_success"),e.$Message.success("修改成功"))})):e.$Message.error("Fail!")}):this.$Message.error("班级信息不完整")},handleReset:function(t){this.$refs[t].resetFields(),this.formValidate.tagList=[]},addTag:function(){if(""!==this.subject&&""!==this.grade)if(~~this.grade>100||~~this.grade<0)this.$Message.error("请输入正确的分数");else{var t=this.subject+":"+this.grade;this.formValidate.tagList.push(t),this.addGrade=!1,this.subject="",this.grade=""}else this.addGrade=!1},delTag:function(t){this.formValidate.tagList.splice(t,1)}}},w,!1,function(t){a("zVNg")},null,null).exports},data:function(){var t=this;return{checkInfo:{id:"",name:""},delInfo:{show:!1,id:"",stdName:"",loading:!0},sexArr:["男","女","未知"],mode:0,formValidate:{name:"",id:"",sex:"",collage:"",major:"",tagList:[]},showForm:!1,columns7:[{title:"学号",key:"id",fixed:"left",width:150},{title:"姓名",key:"name"},{title:"性别",key:"sex",render:function(e,a){return e("div",{},t.sexArr[a.row.sex])}},{title:"班级",key:"major"},{title:"学院",key:"collage"},{title:"操作",key:"action",fixed:"right",width:200,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifly(a.row)}}},"修改"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.remove(a.index)}}},"删除"),e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.show(a.index)}}},"查看成绩")])}}],data6:[],page:1,pageCount:10}},mounted:function(){this.getStudentList()},methods:{handleSpinCustom:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"load-c",size:18}}),t("div","Loading")])}})},check:function(){var t=this,e=this.checkInfo;""===e.id&&""===e.name?(this.page=1,this.getStudentList()):(this.handleSpinCustom(),this.page=1,this.$http({method:"get",url:"/api/search_student",params:{page:this.page,id:this.checkInfo.id,name:this.checkInfo.name}}).then(function(e){t.$Spin.hide(),t.data6=e.data.data.std_list,t.pageCount=10*e.data.data.page_count}))},addSuccess:function(){this.closeForm(),this.page=1,this.getStudentList()},changePage:function(t){this.page=t,this.getStudentList()},getStudentList:function(){var t=this;this.handleSpinCustom(),this.$http({method:"get",url:"/api/check_student",params:{page:this.page}}).then(function(e){if(t.$Spin.hide(),0===e.data.status){var a=e.data.data;t.pageCount=10*a.page_count,t.data6=a.std_list}})},modifly:function(t){this.formValidate=JSON.parse(y()(this.data6[t._index])),this.mode=1,this.showForm=!0},show:function(t){var e=this.data6[t],a="";a=(a=(a=(a=(a=a+"姓名："+e.name+"<br>")+"学号："+e.id+"<br>")+"性别："+this.sexArr[e.sex]+"<br>")+"班级："+e.major+"<br>")+"学院："+e.collage+"<br>",e.tagList.length>0&&(a+="成绩：",e.tagList.forEach(function(t){a=a+t+"\t"})),this.$Modal.info({title:"学生成绩",content:a})},remove:function(t){this.delInfo.show=!0,this.delInfo.stdName=this.data6[t].name,this.delInfo.id=this.data6[t].id},deleteStudent:function(){var t=this;this.$http({method:"get",url:"/api/delete_student",params:{id:this.delInfo.id}}).then(function(e){t.delInfo.show=!1,0===e.data.status&&(t.$Message.success("删除成功"),t.page>e.data.data.page_count&&(t.page-=1),t.getStudentList())})},addStudent:function(){this.formValidate={name:"",id:"",college:"",major:"",tagList:[]},this.mode=0,this.showForm=!0},closeForm:function(){this.showForm=!1}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-box"},[a("Input",{staticStyle:{width:"200px"},model:{value:t.checkInfo.id,callback:function(e){t.$set(t.checkInfo,"id",e)},expression:"checkInfo.id"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("学号")])]),t._v(" "),a("Input",{staticStyle:{width:"200px","margin-left":"20px"},model:{value:t.checkInfo.name,callback:function(e){t.$set(t.checkInfo,"name",e)},expression:"checkInfo.name"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("姓名")])]),t._v(" "),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"},on:{click:t.check}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"auto"},attrs:{type:"info"},on:{click:t.addStudent}},[t._v("添加学生")])],1),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),a("div",{staticClass:"fenye-box"},[a("Page",{attrs:{"class-name":"fenye",total:t.pageCount,"show-elevator":""},on:{"on-change":t.changePage}})],1),t._v(" "),a("add-student",{attrs:{show:t.showForm,formValidate:t.formValidate,mode:t.mode},on:{add_success:t.addSuccess,closeForm:t.closeForm}}),t._v(" "),a("Modal",{attrs:{title:"删除学生",loading:t.delInfo.loading,"class-name":"vertical-center-modal"},on:{"on-ok":t.deleteStudent},model:{value:t.delInfo.show,callback:function(e){t.$set(t.delInfo,"show",e)},expression:"delInfo.show"}},[a("p",[t._v("您确定要删除学生“"+t._s(t.delInfo.stdName)+"”吗？")])])],1)},staticRenderFns:[]};var I,b=a("Z0/y")(x,k,!1,function(t){a("WtAE")},null,null).exports,$=a("a3Yh"),C=a.n($),S=(I={computed:{},props:{showAddTeacher:{type:Boolean,default:!1},form:{type:Object},mode:{type:Number,default:"0"}},data:function(){return{loading:!1,showForm:!1,collageList:[],formValidate:{name:"",id:"",sex:"",position:"",collage:""},rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],id:[{required:!0,message:"职工号不能为空",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空",trigger:"blur"}],position:[{required:!0,message:"职位不能为空",trigger:"blur"}],collage:[{required:!0,message:"学院不能为空",trigger:"blur"}]}}},watch:{showAddTeacher:function(t){this.showForm=t,t&&(this.formValidate=JSON.parse(y()(this.form)))},showForm:function(t){this.$emit("update:showAddTeacher",t)}}},C()(I,"computed",{checkMode:function(){return 1===this.mode}}),C()(I,"mounted",function(){this.getCollageList()}),C()(I,"methods",{getCollageList:function(){var t=this;this.$http({method:"get",url:"/api/other"}).then(function(e){t.collageList=e.data.data.list})},handleModifly:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&(t.loading=!0,t.$http({method:"post",url:"/api/modifly_teacher",data:{tea_form:t.formValidate}}).then(function(e){t.loading=!1,0===e.data.status&&(t.$Message.success("修改成功"),t.showForm=!1,t.$emit("success"))}))})},submitForm:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&(t.loading=!0,t.$http({method:"post",url:"/api/add_teacher",data:{tea_form:t.formValidate}}).then(function(e){t.loading=!1,0===e.data.status&&(t.$Message.success("添加成功"),t.showForm=!1,t.$emit("success"))}))})},handleReset:function(){this.$refs.formValidate.resetFields()}}),I),V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{width:"600"},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[a("p",{attrs:{slot:"header"},slot:"header"}),t._v(" "),a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.rules,"label-width":80}},[a("FormItem",{attrs:{label:"教师姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"教师姓名"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"职工号",prop:"id"}},[a("Input",{attrs:{disabled:t.checkMode,placeholder:"职工号"},model:{value:t.formValidate.id,callback:function(e){t.$set(t.formValidate,"id",e)},expression:"formValidate.id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"性别",prop:"sex"}},[a("Select",{model:{value:t.formValidate.sex,callback:function(e){t.$set(t.formValidate,"sex",e)},expression:"formValidate.sex"}},[a("Option",{attrs:{value:"0"}},[t._v("男")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("女")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("未知")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"职位",prop:"position"}},[a("Select",{model:{value:t.formValidate.position,callback:function(e){t.$set(t.formValidate,"position",e)},expression:"formValidate.position"}},[a("Option",{attrs:{value:"0"}},[t._v("教师")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("教授")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"学院",prop:"collage"}},[a("Select",{model:{value:t.formValidate.collage,callback:function(e){t.$set(t.formValidate,"collage",e)},expression:"formValidate.collage"}},t._l(t.collageList,function(e){return a("Option",{key:e.id,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[0==t.mode?a("Button",{on:{click:t.handleReset}},[t._v("重置")]):t._e(),t._v(" "),1==t.mode?a("Button",{on:{click:function(e){t.showForm=!1}}},[t._v("取消")]):t._e(),t._v(" "),0==t.mode?a("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.submitForm}},[t._v("确定")]):t._e(),t._v(" "),1==t.mode?a("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleModifly}},[t._v("修改")]):t._e()],1)])],1)},staticRenderFns:[]};var M={components:{addTeacher:a("Z0/y")(S,V,!1,function(t){a("S2SI")},null,null).exports},data:function(){var t=this;return{loading:!0,delInfo:{show:!1,loading:!0,teaName:"",id:""},checkInfo:{id:"",name:""},sexArr:["男","女","未知"],positionArr:["教师","教授"],mode:0,showAddTeacher:!1,form:{name:"",id:"",sex:"",position:"",collage:""},columns7:[{title:"职工号",key:"id",fixed:"left",width:150},{title:"姓名",key:"name"},{title:"性别",key:"sex",render:function(e,a){return e("div",{},t.sexArr[a.row.sex])}},{title:"职位",key:"position",render:function(e,a){return e("div",{},t.positionArr[a.row.position])}},{title:"学院",key:"collage"},{title:"操作",key:"action",fixed:"right",width:200,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifly(a.row)}}},"修改"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleDelete(a.row)}}},"删除")])}}],data6:[],pageInfo:{page:1,total:7,count:7}}},mounted:function(){this.getTeacherList()},methods:{handleSearch:function(){var t=this;this.loading=!0,this.$http({method:"get",url:"/api/search_teacher",params:{id:this.checkInfo.id,name:this.checkInfo.name,page:this.pageInfo.page,count:this.pageInfo.count}}).then(function(e){t.loading=!1,0===e.data.status&&(t.data6=e.data.data.tea_list,t.pageInfo=e.data.data.total)})},handleDelete:function(t){this.delInfo.teaName=t.name,this.delInfo.id=t.id,this.delInfo.show=!0},remove:function(){var t=this,e=this.delInfo.id;this.$http({method:"get",url:"/api/delete_teacher",params:{id:e}}).then(function(e){if(t.delInfo.show=!1,0===e.data.status){t.pageInfo.total=parseInt(e.data.data.total/7*10,10);var a=10*(t.pageInfo.page-1);t.pageInfo.total<=a&&(t.pageInfo.page-=1),t.getTeacherList()}})},handlePage:function(t){this.pageInfo.page=t,this.getTeacherList()},getTeacherList:function(){var t=this;this.loading=!0,this.$http({method:"get",url:"/api/check_teacher",params:{page:this.pageInfo.page,count:this.pageInfo.count}}).then(function(e){if(0===e.data.status){var a=e.data.data;t.pageInfo.total=parseInt(a.total/7*10,10),t.data6=a.tea_list,t.loading=!1}})},modifly:function(t){this.form=t,this.mode=1,this.showAddTeacher=!0},addTeacher:function(){this.form={name:"",id:"",sex:"",position:"",collage:""},this.mode=0,this.showAddTeacher=!0}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-box"},[a("Input",{staticStyle:{width:"200px"},model:{value:t.checkInfo.id,callback:function(e){t.$set(t.checkInfo,"id",e)},expression:"checkInfo.id"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("职工号")])]),t._v(" "),a("Input",{staticStyle:{width:"200px","margin-left":"20px"},model:{value:t.checkInfo.name,callback:function(e){t.$set(t.checkInfo,"name",e)},expression:"checkInfo.name"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("姓名")])]),t._v(" "),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"auto"},attrs:{type:"info"},on:{click:t.addTeacher}},[t._v("添加教师")])],1),t._v(" "),a("Table",{attrs:{loading:t.loading,border:"",columns:t.columns7,data:t.data6}}),t._v(" "),a("div",{staticClass:"fenye-box"},[a("Page",{attrs:{"class-name":"fenye",total:t.pageInfo.total,"show-elevator":""},on:{"on-change":t.handlePage}})],1),t._v(" "),a("Modal",{attrs:{title:"删除老师",loading:t.delInfo.loading,"class-name":"vertical-center-modal"},on:{"on-ok":t.remove},model:{value:t.delInfo.show,callback:function(e){t.$set(t.delInfo,"show",e)},expression:"delInfo.show"}},[a("p",[t._v("您确定要删除员工“"+t._s(t.delInfo.teaName)+"”吗？")])]),t._v(" "),a("add-teacher",{attrs:{"show-add-teacher":t.showAddTeacher,form:t.form,mode:t.mode},on:{"update:showAddTeacher":function(e){t.showAddTeacher=e},success:t.getTeacherList}})],1)},staticRenderFns:[]};var A=a("Z0/y")(M,F,!1,function(t){a("+1AM")},null,null).exports,L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"other"},[a("Row",[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"flex"},[a("p",{staticClass:"title"},[t._v("学院")]),t._v(" "),a("Button",{attrs:{type:"ghost",icon:"plus-round"},on:{click:function(e){t.handleAdd("collage")}}})],1)]),t._v(" "),a("Col",{staticClass:"block",attrs:{span:"24"}},t._l(t.list,function(e,o){return a("Tag",{key:e.id,attrs:{type:"dot",closable:"",color:t.color[o%4]},on:{"on-close":function(a){t.delectCollage(e.id)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"flex"},[a("p",{staticClass:"title"},[t._v("专业")]),t._v(" "),a("Button",{attrs:{type:"ghost",icon:"plus-round"},on:{click:function(e){t.handleAdd("speciality")}}})],1)]),t._v(" "),a("Col",{staticClass:"block",attrs:{span:"24"}},t._l(t.list,function(e,o){return a("span",{key:e.id},t._l(e.speciality,function(n,s){return a("span",{key:s},[a("Tag",{attrs:{type:"dot",closable:"",color:t.color[o%4]},on:{"on-close":function(a){t.delectSpeciality(e.id,n.name)}}},[t._v(t._s(n.name))])],1)}))}))],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"flex"},[a("p",{staticClass:"title"},[t._v("班级")]),t._v(" "),a("Button",{attrs:{type:"ghost",icon:"plus-round"},on:{click:function(e){t.handleAdd("class")}}})],1)]),t._v(" "),a("Col",{staticClass:"block",attrs:{span:"24"}},t._l(t.list,function(e,o){return a("span",{key:e.id},t._l(e.speciality,function(n,s){return a("span",{key:s},t._l(n.class,function(n,i){return a("span",{key:i},[a("Tag",{attrs:{type:"dot",closable:"",color:t.color[o%4]},on:{"on-close":function(a){t.delectClass(e.id,s,n)}}},[t._v(t._s(n))])],1)}))}))}))],1),t._v(" "),a("Modal",{attrs:{title:t.modalTitle,"class-name":"vertical-center-modal"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},["speciality"==t.mode?a("div",{staticClass:"flex"},[a("Select",{staticStyle:{width:"200px"},model:{value:t.collageId,callback:function(e){t.collageId=e},expression:"collageId"}},t._l(t.list,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入您要添加的内容"},model:{value:t.addContent,callback:function(e){t.addContent=e},expression:"addContent"}})],1):t._e(),t._v(" "),"class"==t.mode?a("div",{staticClass:"flex"},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Cascader",{attrs:{data:t.listData},model:{value:t.addClassInfo,callback:function(e){t.addClassInfo=e},expression:"addClassInfo"}})],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"请输入您要添加的内容"},model:{value:t.addContent,callback:function(e){t.addContent=e},expression:"addContent"}})],1)],1)],1):t._e(),t._v(" "),"collage"==t.mode?a("div",[a("Input",{attrs:{placeholder:"请输入您要添加的内容"},model:{value:t.addContent,callback:function(e){t.addContent=e},expression:"addContent"}})],1):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.showModal=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleAddEvent}},[t._v("添加")])],1)])],1)},staticRenderFns:[]};var T=a("Z0/y")({data:function(){return{color:["blue","green","red","yellow"],list:[],listData:[],showModal:!1,addContent:"",mode:"",loading:!1,collageId:null,addClassInfo:[]}},watch:{list:"initData"},computed:{modalTitle:function(){return"collage"===this.mode?"添加学院":"class"===this.mode?"添加班级":"speciality"===this.mode?"添加专业":""}},mounted:function(){this.getDataList()},methods:{initData:function(){var t=this;this.listData=[],this.list.forEach(function(e){var a={value:e.id,label:e.name,children:[]};e.speciality.forEach(function(t,e){a.children.push({value:e,label:t.name})}),t.listData.push(a)})},delectClass:function(t,e,a){var o=this,n=this;this.$Modal.confirm({title:"提示",content:"确定要删除该班级吗",loading:!0,onOk:function(){n.$http({method:"get",url:"/api/delete_class",params:{id:t,speciality_index:e,class_name:a}}).then(function(t){o.$Modal.remove(),0===t.data.status&&(o.$Message.success("删除成功"),n.getDataList())})}})},delectSpeciality:function(t,e){var a=this,o=this;this.$Modal.confirm({title:"提示",content:"删除后该专业下的班级都会清除",loading:!0,onOk:function(){o.$http({method:"get",url:"/api/delete_speciality",params:{id:t,speciality_name:e}}).then(function(t){a.$Modal.remove(),0===t.data.status&&(a.$Message.success("删除成功"),o.getDataList())})}})},delectCollage:function(t){var e=this,a=this;this.$Modal.confirm({title:"提示",content:"删除后该学院下的专业都会清除",loading:!0,onOk:function(){a.$http({method:"get",url:"/api/remove_collage",params:{id:t}}).then(function(t){e.$Modal.remove(),0===t.data.status&&(e.$Message.success("删除成功"),a.getDataList())})}})},handleAddEvent:function(){this.addContent?(this.loading=!0,"collage"===this.mode?this.addCollage():"speciality"===this.mode&&this.collageId?this.addSpeciality():"class"===this.mode&&this.addClassInfo.length>0?this.addClass():(this.$Message.info("您还没有内容没选择"),this.loading=!1)):this.$Message.info("您还没有填写内容")},addClass:function(){var t=this;this.$http({method:"get",url:"/api/add_class",params:{id:this.addClassInfo[0],speciality_index:this.addClassInfo[1],class_name:this.addContent}}).then(function(e){t.loading=!1,t.showModal=!1,t.getDataList(),0===e.data.status&&t.$Message.success("添加成功")})},addSpeciality:function(){var t=this;this.$http({method:"get",url:"/api/add_speciality",params:{id:this.collageId,speciality_name:this.addContent}}).then(function(e){t.loading=!1,t.showModal=!1,t.getDataList(),0===e.data.status&&t.$Message.success("添加成功")})},addCollage:function(){var t=this;this.$http({method:"get",url:"/api/add_collage",params:{collage_name:this.addContent}}).then(function(e){t.loading=!1,t.showModal=!1,t.getDataList(),0===e.data.status&&t.$Message.success("添加成功")})},handleAdd:function(t){this.addContent="",this.mode=t,this.showModal=!0},getDataList:function(){var t=this;this.$http({method:"get",url:"/api/other"}).then(function(e){t.list=e.data.data.list})}}},L,!1,function(t){a("b8XZ")},null,null).exports;s.default.use(r.a);var D=new r.a({mode:"history",routes:[{path:"/login",name:"login",component:u},{path:"/",component:m,children:[{path:"",name:"welcome",component:v},{path:"student",name:"student",component:b},{path:"teacher",name:"teacher",component:A},{path:"other",name:"other-manage",component:T}]}]}),B=a("qeXM"),j=a.n(B),z=a("aozt"),R=a.n(z);a("KYUQ");s.default.config.productionTip=!1,R.a.defaults.withCredentials=!0,R.a.defaults.headers.common.Authorization=localStorage.token||"",R.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",s.default.prototype.$http=R.a,s.default.use(j.a),R.a.interceptors.request.use(function(t){return R.a.defaults.headers.common.Authorization=localStorage.token||"",t},function(t){return n.a.reject(t)}),R.a.interceptors.response.use(function(t){return 0!==t.data.status&&j.a.Message.error(t.data.msg),20002!==t.data.status&&20001!==t.data.status||D.replace({name:"login"}),t},function(t){return n.a.reject(t)}),new s.default({el:"#app",router:D,components:{App:l},template:"<App/>"})},S2SI:function(t,e){},SaGo:function(t,e,a){t.exports=a.p+"static/img/swiper_03.eb9a993.jpg"},WtAE:function(t,e){},b8XZ:function(t,e){},etUc:function(t,e){},zVNg:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.dbcfdbfe58bbff447113.js.map